<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feliz Aniversario — mon amour</title>
  <style>
    :root{ --bg:#ffeef6; --pink:#f6b6d0; --dark:#2b1b1b; --accent:#f08ab5 }
    html,body{height:100%;margin:0;font-family: 'Georgia', serif;background:linear-gradient(180deg, #ffeef6 0%, #fff0f2 100%);}
    .container{max-width:1100px;margin:20px auto;padding:20px;position:relative;text-align:center}
    header{margin-top:10px}
    .small{font-family: 'Brush Script MT', cursive;font-size:42px;color:#000;letter-spacing:1px}
    h1{font-size:86px;margin:6px 0;font-weight:700;letter-spacing:2px}
    .subtitle{font-size:20px;color:#222;margin-bottom:18px;min-height:28px}

    .entry{display:flex;justify-content:center;gap:8px;align-items:center;margin:10px 0}
    .entry input[type=text]{width:420px;padding:8px;border:3px solid #f4a3c9;background:transparent;border-radius:2px}
    .entry button{padding:8px 14px;background:transparent;border:2px solid #f08ab5;border-radius:4px;cursor:pointer}

    .message-box{height:200px;background:rgba(255, 182, 207,0.9);border:4px solid #f08ab5;margin:18px auto;max-width:900px;border-radius:3px;padding:14px;text-align:left;overflow:auto}

    .music-bar{position:fixed;left:18px;bottom:18px;display:flex;gap:8px;align-items:center;background:rgba(255,255,255,0.6);padding:8px 12px;border-radius:22px;border:1px solid rgba(0,0,0,0.06)}
    .music-bar button{background:none;border:none;cursor:pointer;font-size:20px}
    .music-code{font-size:14px;color:#333}

    .decor{position:absolute;top:18px;left:18px;width:120px;opacity:0.95;cursor:pointer}
    .decor.right{right:18px;left:auto}
    .corner-img{position:absolute;right:18px;bottom:18px;width:110px;cursor:pointer}

    .balloon{position:fixed;left:50%;transform:translateX(-50%);bottom:110px;background:white;padding:12px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.1);max-width:320px;display:none}
    .balloon.show{display:block}

    .hint-link{color:#4c1f2f;text-decoration:underline}

    .progress{margin-top:8px;font-size:14px;color:#333}

    @media(max-width:700px){ h1{font-size:44px} .entry input{width:200px} .message-box{height:160px} }
  </style>
</head>
<body>
  <div class="container">
    <img src="assets/Lazo.png" class="decor" id="lazo" alt="Lazo"/>
    <img src="assets/Cereza.png" class="decor right" id="cereza" alt="Cereza"/>

    <header>
      <div class="small">Feliz Aniversario</div>
      <h1>mon amour</h1>
      <div class="subtitle" id="subtitle">(Aquí aparecerá el acertijo)</div>
    </header>

    <div class="entry">
      <input id="answer" type="text" placeholder="Escribe tu respuesta aquí..." autocomplete="off" />
      <button id="enterBtn">ENTER</button>
    </div>

    <div class="message-box" id="messageBox"></div>

    <div class="progress" id="progress">Acertijo 1 / 15</div>

    <img src="assets/Tiara.png" class="corner-img" id="tiara" alt="Tiara"/>

    <div class="balloon" id="balloon">Mensaje</div>

  </div>

  <div class="music-bar" id="musicBar" style="display:none">
    <button id="playPause">▶</button>
    <div class="music-code" id="musicIndicator">Pista de musica</div>
    <audio id="audioPlayer"></audio>
  </div>

  <script>
    // --- Acertijos ---
    const riddles = [
      {id:1,prompt:`¿Cuál fue nuestro inicio?`,hintAfter:0,hintText:`MMMM cerca me gusta como piensas pero prueba mejor con la fecha Septiembre siempre fue nuestro mes si te pones a pensar.`,correct:["8 de septiembre","8 de septiembre del 2023","08|09|23","08/09/23","08-09-23"]},
      {id:2,prompt:`"wtapsd st btcip"`,hintAfter:3,hintText:`Visita: https://caesar-cipher.com`,correct:["helado de menta"]},
      {id:3,prompt:`Escucha el código morse.`,hintAfter:3,hintText:`Trata de escuchar bien la pagina o busca en tus recuerdos países, tal vez de pesadilla`,correct:["alicia en el país de la pesadillas","alicia en el pais de la pesadillas","alicia en el pais de las pesadillas","alicia en las pesadillas"],specialLetter:"P",audio:"assets/morse.mp3"},
      {id:4,prompt:`Pequeño regalo (playlist).`,hintAfter:3,hintText:`Recuerda nuestro humor o también el Nsqk lo repite en una canción`,correct:["rompecabezas"],link:"https://open.spotify.com/playlist/4mrGLgZmjdwkwcyvPscBGY"},
      {id:5,prompt:`Escucha y ve que te dice la música (minuto 1:15).`,hintAfter:3,hintText:`Prueba con el nombre de los tres pequeños de mayor a menor.`,correct:["nerea, vinny y alex","nerea vinny alex"],audio:"assets/Saturno.mp3"},
      {id:6,prompt:`Descifra: 4c,61,72,61,20,4a,65,61,6e`,hintAfter:3,hintText:`Piensa en un tú de otro universo.`,correct:["lara jean"],specialLetter:"S"},
      {id:7,prompt:`¿Cuál fue la banda que te enseñé?`,hintAfter:3,hintText:`Quizás una prueba gratuita sin floro te haga recordar algo.`,correct:["algo caleta"]},
      {id:8,prompt:`La clave de mi cel...`,hintAfter:3,hintText:`Prueba con fechas de mi núcleo familiar.`,correct:["152108"]},
      {id:9,prompt:`Mezcla los códigos: 49,6a,61,78,65,70,63,74,68`,hintAfter:3,hintText:`Quizás primero uses el segundo método y después el primero.`,correct:["tulipanes"],specialLetter:"T"},
      {id:10,prompt:`¿Cuál fue la inspiración de la caja?`,hintAfter:3,hintText:`Se inspira en una obra de un pintor al cual un tiempo me pusiste de apodo.`,correct:["noche estrellada","la noche estrellada"]},
      {id:11,prompt:`Resuelve: x^3−45x^2+675x−3375 = x^2−30x+225`,hintAfter:3,hintText:`Vamos corazón, yo sé que puedes.`,correct:["15"]},
      {id:12,prompt:`¿Cuál era el perrito animado que amamos?`,hintAfter:3,hintText:`Recuerda...`,correct:["snoopy"],specialLetter:"N"},
      {id:13,prompt:`Regalo y ayuda con tu viaje.`,hintAfter:3,hintText:`Abre el documento compartido.`,correct:["te amo"],link:"https://docs.google.com/document/d/1cp254Q6XPfUuR4CRq9VRn0ynH5ZIyjY5iWR4octW6io/edit?usp=sharing"},
      {id:14,prompt:`Escucha la cancion y recuerda siempre sera mi marca mas hermosa.`,hintAfter:3,hintText:`Lo dije en el acertijo N°6.`,correct:["tatuaje del alma"],audio:"assets/444.mp3"},
      {id:15,prompt:`Clave final con letras de múltiplos de 3.`,hintAfter:0,hintText:"",correct:["pstn","PSTN"],final:true}
    ];

    const motivational = ["Vamos mi niña tu puedes","Preciosa vuelve a intentarlo","mmm casi bleh","tu puedes corazón","Mi princesa tu puedes","Amor vamos no te rindas","Me encantas","Te amo muchototote","muto muto mutotoote","Enserio me encantas","sigue intentando preciosa","uy creo que eso no era","bleh no puede","JKAJKAJKA respira y piensa","Te amo mis ojitos preciosos","Casi pero neh","muak","gogogogo","jijijiji vamos no te rindas","yo se que tu puedes","Estoy muy orgulloso de ti mi niña","uy casi","no te rindas corazón","Tu lo eres todo para mi"];

    const secretWords = {
      "cachetitos":"Siempre me encanta lo suaves y lindos que son tus cachetitos, mis cachetitos bonitos muaks",
      "444":"Tu siempre va tenerme y Yo siempre voa tenerte",
      "mi princesita":"Tu siempre seras eso para mi mi dulce princesita encantadora inteligente y perfecta muask",
      "abogada":"Seras la mejor abogada del mundo, no le digas a mi mamá que dije eso, pero enserio siempre logras lo que te propones y seras la mejor en ello",
      "te extraño":"Sí un día deseas regresar no te haré reclamos de nada, solo te abrazaré y te diré lo mucho que te extrañé..",
      "vuelve":"Porfavor vuelve aunque sea un segundo cuando necesites mis brazos para sanarte callaré y disfrutare de nuestra calma",
      "amor":"Pensar que esta palabra ahora el unico significado que le doy es tú",
      "corazón":"Siempre te pertenecera es mas tuyo que mio muaks",
      "ade?":"Donde estas llameme ¿Dónde estás?, llámame Déjame verte"
    };

    let current = 1;  // Reinicia siempre en el acertijo 1
    let attempts = 0;

    const subtitle=document.getElementById('subtitle');
    const progress=document.getElementById('progress');
    const answerInput=document.getElementById('answer');
    const enterBtn=document.getElementById('enterBtn');
    const messageBox=document.getElementById('messageBox');
    const musicBar=document.getElementById('musicBar');
    const playBtn=document.getElementById('playPause');
    const audioPlayer=document.getElementById('audioPlayer');
    const musicIndicator=document.getElementById('musicIndicator');
    const balloon=document.getElementById('balloon');

    function updateUI(){
      progress.textContent=`Acertijo ${current} / 15`;
      const r=riddles[current-1];
      subtitle.innerHTML=`<strong>Acertijo ${r.id}:</strong> ${r.prompt}`;
      messageBox.innerHTML="";
      if(r.link) messageBox.innerHTML+=`<div><a href="${r.link}" target="_blank">Abrir recurso</a></div>`;
      if(r.specialLetter) messageBox.innerHTML+=`<div><strong>Letra especial: ${r.specialLetter}</strong></div>`;

      if(r.audio){
        musicBar.style.display="flex";
        audioPlayer.src=r.audio; // cargar el audio al entrar al acertijo
        playBtn.textContent="▶";
        musicIndicator.textContent="Pista de musica";
      } else {
        musicBar.style.display="none";
        audioPlayer.pause();
        audioPlayer.src="";
      }
    }

    function normalize(s){return s.trim().toLowerCase();}
    function showMessage(t){messageBox.innerHTML=`<div>${t}</div>`;}

    function nextRiddle(){current++;attempts=0;if(current<=riddles.length)updateUI();}

    function handleSubmit(){
      const raw=answerInput.value;if(!raw) return;
      const text=normalize(raw);

      if(secretWords[text]){showMessage(`<strong>Secreto desbloqueado:</strong> ${secretWords[text]}`);answerInput.value='';return;}

      const r=riddles[current-1];

      if(r.correct.some(c=>normalize(c)===text)){
        showMessage("<strong>Correcto ✅</strong>");
        if(r.final){window.location.href='https://skylesskb.github.io/Sky';return;}
        nextRiddle();
      }else{
        attempts++;
        showMessage(`<strong>Incorrecto ✖</strong> — ${motivational[Math.floor(Math.random()*motivational.length)]}`);
        if(r.hintAfter && attempts>=r.hintAfter){showMessage(`<strong>Pista:</strong> ${r.hintText}`);}
      }
      answerInput.value='';
    }

    enterBtn.addEventListener('click',handleSubmit);
    answerInput.addEventListener('keydown',e=>{if(e.key==='Enter')handleSubmit();});

    // Globos en imágenes
    function showBalloon(text){balloon.textContent=text;balloon.classList.add('show');setTimeout(()=>balloon.classList.remove('show'),6000);}
    document.getElementById('lazo').addEventListener('click',()=>showBalloon("Es lindo el ver cómo con la moda coquette aprendí que se puede cambiar de opinión y siempre quise hacerte sentir escuchada..."));
    document.getElementById('cereza').addEventListener('click',()=>showBalloon("Sabes es lindo que poco a poco pude ir conociendo más lo que me dejabas aprender con pequeñas cosas como tus gustos..."));
    document.getElementById('tiara').addEventListener('click',()=>showBalloon("Ey encontraste por tu curiosidad tu lindo accesorio MI PRINCESITA hermosa..."));

    // Música
    playBtn.addEventListener('click',()=>{
      const r=riddles[current-1];
      if(audioPlayer.paused){
        if(r.audio) audioPlayer.src=r.audio;
        audioPlayer.play();
        playBtn.textContent='⏸';
        musicIndicator.textContent=`Pista de musica — CÓDIGO: ${Math.floor(1000+Math.random()*9000)}`;
      }else{
        audioPlayer.pause();
        playBtn.textContent='▶';
        musicIndicator.textContent='Pista de musica';
      }
    });

    updateUI();
  </script>
</body>
</html>
